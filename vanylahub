-- NEBULA CLIENT Ultra Auto-Optimizer (No GUI)
-- Langsung aktif Ultra Mode tanpa reset/GUI

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Lighting = game:GetService("Lighting")
local Workspace = game:GetService("Workspace")

local optimizedParts = {}
local isUltraMode = false

-- Optimasi dasar
local function optimizePerformance()
    -- Workspace
    Workspace.StreamingEnabled = true

    -- Lighting
    Lighting.GlobalShadows = false
    Lighting.Technology = Enum.Technology.Compatibility
    Lighting.FogEnd = 1000000
    Lighting.FogStart = 1000000
    Lighting.FogColor = Color3.fromRGB(255, 255, 255)
    Lighting.Brightness = 3
    Lighting.Ambient = Color3.fromRGB(128, 128, 128)
    Lighting.OutdoorAmbient = Color3.fromRGB(128, 128, 128)
    Lighting.ClockTime = 14
    Lighting.ShadowSoftness = 0

    -- Rendering
    pcall(function()
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level01
        settings().Rendering.GraphicsMode = Enum.GraphicsMode.Direct3D9
    end)

    -- Optimasi part & efek
    local partCount = 0
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("BasePart") then
            obj.TopSurface = Enum.SurfaceType.Smooth
            obj.BottomSurface = Enum.SurfaceType.Smooth
            obj.LeftSurface = Enum.SurfaceType.Smooth
            obj.RightSurface = Enum.SurfaceType.Smooth
            obj.FrontSurface = Enum.SurfaceType.Smooth
            obj.BackSurface = Enum.SurfaceType.Smooth

            obj.Material = Enum.Material.SmoothPlastic
            obj.CastShadow = false

            table.insert(optimizedParts, obj)

        elseif obj:IsA("Texture") or obj:IsA("Decal") then
            obj.Transparency = math.max(obj.Transparency, 0.1)

        elseif obj:IsA("ParticleEmitter") or obj:IsA("Fire") or obj:IsA("Smoke") or obj:IsA("Sparkles") then
            obj.Enabled = false

        elseif obj:IsA("Atmosphere") then
            obj.Density = 0
            obj.Offset = 0
            obj.Color = Color3.fromRGB(255, 255, 255)
            obj.Decay = Color3.fromRGB(255, 255, 255)
            obj.Glare = 0
            obj.Haze = 0

        elseif obj:IsA("Clouds") then
            obj.Enabled = false
            obj.Density = 0

        elseif obj:IsA("BloomEffect") or obj:IsA("BlurEffect") or obj:IsA("ColorCorrectionEffect") then
            obj.Enabled = false
        end

        if partCount % 100 == 0 then task.wait() end
        partCount += 1
    end
end

-- Ultra Optimize langsung
local function ultraOptimize()
    if isUltraMode then return end
    optimizePerformance()

    -- Lighting lebih ekstrim
    Lighting.Technology = Enum.Technology.Legacy
    Lighting.Brightness = 5
    Lighting.Ambient = Color3.fromRGB(178, 178, 178)
    Lighting.OutdoorAmbient = Color3.fromRGB(178, 178, 178)
    Lighting.ColorShift_Bottom = Color3.fromRGB(255, 255, 255)
    Lighting.ColorShift_Top = Color3.fromRGB(255, 255, 255)

    -- Rendering agresif
    pcall(function()
        settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
        settings().Rendering.MeshPartDetailLevel = Enum.MeshPartDetailLevel.Level01
        settings().Rendering.GraphicsMode = Enum.GraphicsMode.Direct3D9
        settings().Physics.AllowSleep = true
        settings().Physics.ThrottleAdjustTime = 0
    end)

    -- Optimasi ulang parts
    for _, obj in pairs(optimizedParts) do
        if obj and obj.Parent then
            obj.Material = Enum.Material.Plastic
            obj.Reflectance = 0
            obj.CastShadow = false
        end
    end

    -- Efek tambahan
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("Sound") and obj.IsPlaying then
            obj.Volume = 0
        elseif obj:IsA("Terrain") then
            obj.WaterWaveSize = 0
            obj.WaterWaveSpeed = 0
            obj.WaterReflectance = 0
            obj.WaterTransparency = 0.5
            obj.WaterColor = Color3.fromRGB(0, 150, 255)
            obj:ReplaceMaterial(Enum.Material.Grass, Enum.Material.SmoothPlastic)
        end
    end

    collectgarbage("collect")
    isUltraMode = true
    print("âœ… Ultra Optimize Active")
end

-- Eksekusi langsung
ultraOptimize()